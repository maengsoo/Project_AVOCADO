<!DOCTYPE html>
<html lang="kr">

<head>
	<meta charset="utf-8">
	<title>아보카도 - No.1 공유킥보드 서비스</title>
	<meta name="author" content="thyoondev">
	<meta name="description" content="아보카도 - No.1 공유킥보드 서비스">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
	<!--제이쿼리 최신 -->
	<script  src="http://code.jquery.com/jquery-latest.min.js"></script>
	<!--css-->
	<link rel="stylesheet" href="css/common.css">
	<link rel="stylesheet" href="css/header.css">
	<link rel="stylesheet" href="css/footer.css">
	<link rel="stylesheet" href="css/start.css">
	<!--이모지-->
	<link href="https://emoji-css.afeld.me/emoji.css" rel="stylesheet">
	<!--파비콘-->
	<link rel="icon" type="image/x-icon" href="img/favicon_io/favicon.ico"/>
	<!--애니메이션 https://animate.style/-->
	 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
	 
	 <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=87p51rsq4y"></script>
	 <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=0a64aa7a78cd30d3f2bc2538a3944e8a&libraries=services"></script>
</head>

<body>
    <!-- header start-->
	<header>
	<div id="header-inner">
	
	<a href="index.html"><div class="logo"><i class="em em-avocado" aria-role="presentation" aria-label="AVOCADO" id="logo-image"></i>&nbsp;<span  id="logo-txt">AVOCADO</span></div></a>
	<nav id="menu">
        <!--<div class="dropdown">
          <a href="#이용방법"><button class="dropbtn"><i class="em em-beginner" aria-role="presentation" aria-label="JAPANESE SYMBOL FOR BEGINNER"></i>&nbsp;&nbsp;이용 방법</button></a>
        </div>
        <div class="dropdown">
          <a href="#안전수칙"><button class="dropbtn"><i class="em em-female-construction-worker" aria-role="presentation" aria-label=""></i>&nbsp;&nbsp;안전 수칙</button></a>
        </div>-->
        <div class="dropdown" >
        <input type="text" id="map_search_input" placeholder="지역을 검색해보세요!" class="dropbtn">
        </div>
        <div class="dropdown" >
            <button class="dropbtn" id="map_search_button" title="검색"><i class="em em-mag header_icon" aria-role="presentation" aria-label="LEFT-POINTING MAGNIFYING GLASS"></i></button>
        </div>
        <div class="dropdown" >
            <button class="dropbtn" id="my_location" title="현재 위치"><i class="em em-round_pushpin header_icon" aria-role="presentation" aria-label="ROUND PUSHPIN"></i></button>
        </div>
        <div class="dropdown">
          <button class="dropbtn"><i class="em em-left_speech_bubble header_icon" aria-role="presentation" aria-label=""></i>&nbsp;&nbsp;게시판</button>
          <div class="dropdown-content">
            <a href="board/freeboard/freeboard_list.html">자유게시판</a>
            <a href="board/qna/qna_list.html">문의하기</a>
            <a href="board/faq/faq_list.html">자주묻는질문</a>
            <a href="/Devinfo">개발정보</a>
          </div>
        </div>
       <!-- <div class="dropdown">
          <a href="start.html"><button class="dropbtn"><i class="em em-rocket" aria-role="presentation" aria-label="ROCKET"></i>&nbsp;&nbsp;출발하기</button></a>
        </div>-->
        <div class="dropdown">
          <a href="member/login.html"><button class="dropbtn-login"><i class="em em-closed_lock_with_key" aria-role="presentation" aria-label="CLOSED LOCK WITH KEY"></i>&nbsp;&nbsp;로그인</button></a>
        </div>
    </nav>
    </div>
	</header>
	<!-- header end-->
	<main>
	<section class="start-section-top">
            <div class="start-main-content">
            <div id="map"></div>
              
    </div>
        </div>
    </section>
    <script>
        var mapOptions = {//지도 초기화면 값
            center: new naver.maps.LatLng(36.326688, 127.407852),//지도의 초기 중심 좌표
            zoom: 16, //지도 초기 줌 레벨
            mapTypeId: "normal", //지도 종류
            minZoom: 8, //지도의 최소 줌 레벨
            zoomControl: true, //줌 컨트롤의 표시 여부
            //줌 컨트롤의 옵션
            zoomControlOptions: {       
              position: naver.maps.Position.TOP_RIGHT,
              style: naver.maps.ZoomControlStyle.SMALL,
            },
            logoControl: false, //로고 컨트롤
            mapDataControl: false, //일반 위성 컨트롤
            mapTypeControl: false, //
        };

        var map = new naver.maps.Map('map', mapOptions);
        
        var marker = new naver.maps.Marker({
        position: new naver.maps.LatLng(36.326688, 127.407852),
        map: map
        });
        
        
        //카카오 검색 api
      let ps = new kakao.maps.services.Places();
      let search_arr = []

      $("#map_search_input").on("keydown",function(e){
        if(e.keyCode === 13){
          let content = $(this).val();
          ps.keywordSearch(content,placeSearchCB);
        }
      })

      $("#map_search_button").on("click",function(e){
        let content = $("#map_search_input").val()
        ps.keywordSearch(content,placeSearchCB);
      })

      function placeSearchCB(data,status,pagination){
        if(status === kakao.maps.services.Status.OK){
          let target = data[0];
          const lat = target.y;
          const lng = target.x;
          const latlng = new naver.maps.LatLng(lat, lng);
          marker = new naver.maps.Marker({
            position: latlng,
            map : map
          })
          if (search_arr.length == 0){
            search_arr.push(marker)
          }else{
            search_arr.push(marker)
            let pre_marker = search_arr.splice(0,1);
            pre_marker[0].setMap(null);
          }
          map.setZoom(17,true);
          map.panTo(latlng);
        }else if($("#map_search_input").val() == ""){
            alert("검색 지역을 입력해주세요!")
            $("#map_search_input").focus();
        }else{
          alert("검색 결과가 없습니다")
        }
      }
        
        
        
        //현재위치 찾기

        let currentUse = true;
      //제이쿼리 클릭 이벤트
      $("#my_location").click(() => {
        //alert("클릭 이벤트");
        if ("geolocation" in navigator) {
          navigator.geolocation.getCurrentPosition(function (position) {
            const lat = position.coords.latitude;
            const lng = position.coords.longitude;
            const latlng = new naver.maps.LatLng(lat, lng);
            if (currentUse) {
              marker = new naver.maps.Marker({
                map: map,
                position: latlng,
                icon: {
                  content: '<img class = "pulse" draggable="false" unselectable="on" src="https://myfirstmap.s3.ap-northeast-2.amazonaws.com/circle.png"></img>',
                  anchor: new naver.maps.Point(11, 11),
                },
              });
              currentUse = false;
            }
            map.setZoom(17, true); //줌레벨 , 이동 애니메이션
            map.panTo(latlng);
          });
        } else {
          alert("위치정보 사용 불가능");
        }
      });
        
        
</script>
		</main>
	<!-- footer start-->
	<footer>
        <div class="footer-inner">
         <div class="footer-inner-box">
          <div class="footer-box">
           <a href="index.html"><div class="footer-logo"><i class="em em-avocado" aria-role="presentation" aria-label="AVOCADO" id="footer-logo-image"></i>&nbsp;<span id="footer-logo-txt">AVOCADO</span></div></a>   
           </div>
           <div class="footer-box">
          <p class="footer-box-content-title">사이트 맵</p>
          <p class="footer-box-content-txt">홈</p>
          <p class="footer-box-content-txt">자유게시판</p>
          <p class="footer-box-content-txt">QNA</p>
          <p class="footer-box-content-txt">FAQ</p>
           </div>
           <div class="footer-box">
           <p class="footer-box-content-title">개발자 정보</p>
           <p class="footer-box-content-txt">프로젝트명 : 아보카도</p>
           <p class="footer-box-content-txt">개발 로드맵 : <a href="https://www.notion.so/153432ead0fd4336b0b998d08e6aa426?v=9b3a63f01aa84e0ca0249bfc9ede1527" target="_blank">로드맵 바로가기</a></p>
            <p class="footer-box-content-txt">개발크루원 : 윤태희 장명수 조경미</p>
            <p class="footer-box-content-txt">Github : <a href="https://github.com/thyoondev" target="_blank">https://github.com/thyoondev</a></p>
            <p class="footer-box-content-txt">e-mail : th.yoon.dev@gmail.com</p>

           </div>
           </div>
           <div>
           <br>
            <div class="footer-box-bottom">
            <i class="em em-kr" aria-role="presentation" aria-label="South Korea Flag"></i>
            <p>서비스 문의 : th.yoon.dev@gmail.com</p>
           <p> © Copyright thyoondev. All right reserved.</p>
           </div>
           </div>
        </div>
	</footer>
	<!-- footer end-->
</body>

</html>